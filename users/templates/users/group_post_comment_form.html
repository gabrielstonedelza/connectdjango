{% load static %}
{% load crispy_forms_tags %}
<form class="form-inline" method="post" action="." id="group_post_comments">
  {% csrf_token %}
  {{ form|crispy }}
  <button type="submit" class="butt mb-2">Comment</button>
</form>
<br />
<hr class="my-4" />
<br />
<h4 class="mb-3">
<div class="col-xs-6 col-sm-6 col-md-6 ml-auto">
Comments <span class="ml-2 badge badge-info">{{ comments_count }}</span>
</h4>
<br />
<div class="answers-section">
    <ul class="list-group">
        {% for comment in comments %}
        <li class="list-group-item d-flex">
            <img src="{{ comment.user.profile.profile_pic.url }}" alt="user-profile-picture" />
            <div>
                <a class="text-muted ml-2 mt-2" href="{% url 'userprofilepost' comment.user.username %}">{{ comment.user }}</a>
                <br>
                <p class="ml-2">{{ comment.comments }}</p>
                <sup style="float: right;"><small>{{ comment.date_posted }}</small></sup>
            </div>
        </li>
        {% endfor %}
    </ul>
{% for comment in comments %}
<div class="userpicandname">
<img src="{{ comment.user.profile.profile_pic.url }}" alt="user-profile-picture" />
<div>
    <a class="text-muted ml-2 mt-2" href="{% url 'userprofilepost' comment.user.username %}">{{ comment.user }}</a>
    <br>
    <p class="ml-2">{{ comment.comments }}</p>
    <sup style="float: right;"><small>{{ comment.date_posted }}</small></sup>
</div>
</div>
<hr class="my-4">
{% endfor %}
</div>
<!--    pagination-->
<nav aria-label="Page navigation example">
<ul class="pagination pagination-circle pg-blue pt-3">
    {% if comments.has_previous %}
    <li class="page-item "><a href="?page=1" class="page-link">First</a></li>
    <li class="page-item ">
        <a class="page-link" href="?page={{ page_range.previous_page_number }}" aria-label="Previous">
        <span aria-hidden="true">&laquo;</span>
        <span class="sr-only">Previous</span>
        </a>
    </li>
    {% endif %}

    {% for c in comments.paginator.page_range %}
    {% if comments.number == c %}
        <li class="page-item active">
        <a href="?page={{ c }}" class="page-link">{{ c }}</a>
        </li>
    {% elif c > comments.number|add:"-3" and c < comments.number|add:"-3" %}
        {{ c }}
    {% else %}
        <li class="page-item"><a a href="?page={{ c }}" class="page-link">{{c }}</a></li>
    {% endif %}
{% endfor %}

{% if comments.has_next %}
    <li class="page-item">
        <a href="?page={{ comments.next_page_number }}" class="page-link" aria-label="Next">
        <span aria-hidden="true">&raquo;</span>
        <span class="sr-only">Next</span>
        </a>
    </li>
    <li class="page-item"><a href="?page={{ comments.paginator.num_pages }}" class="page-link">Last</a></li>
{% endif %}
</ul>
</nav>
</div>
