{% extends "blog/base_with_nav.html"%}
{% block title %}
Group Posts
{% endblock %}
{% block content%}
<div class="container mt-3">
    <br>
    <h3 class="text-center mb-3">Recent Activities from Groups</h3>
    <br>
    <div class="row mb-3">
            <div class="col-xs-6 col-sm-6 col-md-8 mr-auto mb-3">
                {% for group in group_posts %}
                    <div class="gpost-container">
                    <div class="group-poster-user-name">
                        <img alt="group poster" class="mr-2 z-depth-1-half" src="{{ group.group.logo.url }}"
                             style="width:40px;height:40px;border-radius:50%;" />
                        <div class="group-name">
                            <a class="text-muted" href="{% url 'userprofilepost' group.gmember.username %}">
                                {{ group.gmember }}
                            </a>
                            <|>
                            <a class="text-muted" href="{{ group.group.get_absolute_group_url }}">{{ group.group.group_name }}</a>
                            <br>
                            <small class="text-muted">{{ group.date_posted }}</small>
                        </div>
                    </div>
                    <br>
                    <div class="group-posts-contents z-depth-1-half">
                        <!-- group post content-->
                        {% if group.photo %}
                        <div class="for-group-post-img">
                            <img class="" alt="post photo"  src="{{ group.photo.url }}">
                        </div>
                        <br>
                        <hr class="my-4">
                        {% endif %}
                        <br>
                        <div class="post-content">
                            <p>{{ group.content | safe|slice:":200" }}</p>
                        </div>
                        <br>
                        <a class="text-muted" href="{{ group.get_absolute_group_post_url }}">
                            <i class="fas fa-comment fa-1x"></i> comment
                        </a>
                    </div>
                </div>
                <hr class="my-4">
                {% endfor %}
                <br>
                <nav aria-label="Page navigation example">
                    <ul class="pagination pagination-circle pg-blue pt-3">
                      {% if group_posts.has_previous %}
                        <li class="page-item "><a href="?page=1" class="page-link">First</a></li>
                        <li class="page-item ">
                          <a class="page-link" href="?page={{ page_range.previous_page_number }}" aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                            <span class="sr-only">Previous</span>
                          </a>
                        </li>
                      {% endif %}
                  
                      {% for c in group_posts.paginator.page_range %}
                        {% if group_posts.number == c %}
                          <li class="page-item active">
                            <a href="?page={{ c }}" class="page-link">{{ c }}</a>
                          </li>
                        {% elif c > group_posts.number|add:"-3" and c < group_posts.number|add:"-3" %}
                          {{ c }}
                        {% else %}
                          <li class="page-item"><a a href="?page={{ c }}" class="page-link">{{c }}</a></li>
                      {% endif %}
                    {% endfor %}
                  
                    {% if group_posts.has_next %}
                      <li class="page-item">
                          <a href="?page={{ group_posts.next_page_number }}" class="page-link" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                            <span class="sr-only">Next</span>
                          </a>
                        </li>
                        <li class="page-item"><a href="?page={{ group_posts.paginator.num_pages }}" class="page-link">Last</a></li>
                    {% endif %}
                    </ul>
                  </nav>
            </div>
        <br>
        <div class="col-xs-6 col-sm-6 col-md-4 ml-auto mb-3">
            {% include "blog/groups_to_join.html" %}
        </div>
    </div>
</div>
<br>
{% endblock %}